<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Termux Background
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Roboto Mono', monospace;
    }
  </style>
 </head>
 <body class="bg-black text-gray-100 min-h-screen flex flex-col">
  <header class="bg-black border-b border-gray-700 shadow-md p-4 flex items-center justify-between">
   <h1 class="text-xl font-semibold flex items-center space-x-2">
    <i class="fas fa-image text-green-400">
    </i>
    <span>
     Termux Background
    </span>
   </h1>
  </header>
  <main class="flex-grow container mx-auto px-4 py-6 flex flex-col items-center">
   <section class="w-full max-w-md bg-black border border-gray-700 rounded-lg shadow-lg p-6 flex flex-col items-center space-y-6">
    <h2 class="text-2xl font-semibold text-green-400">
     Select Background Image
    </h2>
    <p class="text-gray-300 text-center">
     Choose a JPEG or PNG image from your device to set as the Termux terminal background.
    </p>
    <label class="cursor-pointer bg-green-500 hover:bg-green-600 transition-colors rounded-md px-6 py-3 text-white font-semibold flex items-center space-x-2" for="imageInput">
     <i class="fas fa-folder-open">
     </i>
     <span>
      Open File Manager
     </span>
    </label>
    <input accept="image/png, image/jpeg" class="hidden" id="imageInput" onchange="previewImage(event)" type="file"/>
    <div class="w-full h-48 rounded-md border-2 border-dashed border-gray-700 flex items-center justify-center overflow-hidden bg-black" id="previewContainer">
     <img alt="Placeholder image showing no image selected, a black box with text 'No Image Selected' in the center" class="object-contain max-h-full max-w-full" height="192" id="previewImage" src="https://storage.googleapis.com/a1aa/image/9f079024-9d5a-4cd4-d982-0631ab80a2d2.jpg" width="400"/>
    </div>
    <button class="w-full bg-green-600 disabled:bg-green-900 disabled:cursor-not-allowed rounded-md py-3 font-semibold text-white transition-colors" disabled="" id="setBackgroundBtn">
     Set as Termux Background
    </button>
   
<div class="w-full space-y-4">
  <label class="block text-sm text-gray-400">Opacity</label>
  <input type="range" id="opacitySlider" min="0" max="100" value="100" class="w-full">

  <label class="block text-sm text-gray-400">Scale Mode</label>
  <select id="scaleMode" class="w-full bg-black border border-gray-600 rounded p-2">
    <option value="fill">Fill</option>
    <option value="fit">Fit</option>
    <option value="tile">Tile</option>
  </select>

  <label class="inline-flex items-center mt-2">
    <input type="checkbox" id="enableBlur" class="form-checkbox h-4 w-4 text-green-500">
    <span class="ml-2 text-gray-300">Enable Blur Animation</span>
  </label>
</div>
</section>
  </main>
  <footer class="bg-black border-t border-gray-700 p-4 text-center text-gray-500 text-sm">
   Â© 2024 Termux Background Plugin
  </footer>
  <script>
   const imageInput = document.getElementById('imageInput');
    const previewImage = document.getElementById('previewImage');
    const previewContainer = document.getElementById('previewContainer');
    const setBackgroundBtn = document.getElementById('setBackgroundBtn');

    function previewImage(event) {
      const file = event.target.files[0];
      if (!file) {
        previewImage.src = 'https://placehold.co/400x192/000000/808080/png?text=No+Image+Selected';
        previewImage.alt = 'Placeholder image showing no image selected, a black box with text "No Image Selected" in the center';
        setBackgroundBtn.disabled = true;
        return;
      }

      if (!file.type.startsWith('image/')) {
        alert('Please select a valid image file (JPEG or PNG).');
        imageInput.value = '';
        setBackgroundBtn.disabled = true;
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        previewImage.src = e.target.result;
        previewImage.alt = `Selected background image preview: ${file.name}`;
        setBackgroundBtn.disabled = false;
      };
      reader.readAsDataURL(file);
    }

    setBackgroundBtn.addEventListener('click', () => {
  if (!imageInput.files.length) return;

  const file = imageInput.files[0];
  const reader = new FileReader();

  reader.onload = function (e) {
    const base64 = e.target.result;

    const opacity = document.getElementById('opacitySlider').value;
    const scaleMode = document.getElementById('scaleMode').value;
    const blur = document.getElementById('enableBlur').checked;

    Android.applyImage(base64, opacity, scaleMode, blur);
  };

  reader.readAsDataURL(file);
});
      if (!imageInput.files.length) return;

      const file = imageInput.files[0];
      alert(`Background image "${file.name}" selected and ready to be applied in Termux.`);
    });
  </script>
 </body>
</html>
